{"name": "test_allowed_age_of_insured_from_3_to_55[chromium-{'age': 55, 'allowed': True}]", "status": "failed", "statusDetails": {"message": "AssertionError: Locator expected to be visible\nActual value: None \nCall log:\nLocatorAssertions.to_be_visible with timeout 10000ms\nwaiting for get_by_text(\"К сожалению, оформление полиса онлайн невозможно.\")", "trace": "page = <Page url='https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/'>\nage_input = {'age': 55, 'allowed': True}\n\n    @pytest.mark.parametrize(\"age_input\", [\n        {\"age\": 2,\n         \"allowed\": False},\n        {\"age\": 3,\n         \"allowed\": True},\n        {\"age\": 4,\n         \"allowed\": True},\n        {\"age\": 54,\n         \"allowed\": True},\n        {\"age\": 55,\n         \"allowed\": True},\n        {\"age\": 56,\n         \"allowed\": False},\n    ],\n                             ids=format_dictionary_test_id\n                             )\n    def test_allowed_age_of_insured_from_3_to_55(page, age_input):\n    \n        \"\"\"Тест на то что застрахованным может быть только человек в возрасте от 3 до 55\"\"\"\n        new_polis_page_1 = NewPolisStep1(page)\n        new_polis_page_2 = NewPolisStep2(page)\n    \n        new_polis_page_1.check_no_virus_contact()\n        new_polis_page_1.check_agreement()\n        new_polis_page_1.click_continue()\n        new_polis_page_1.check_step_is_not_active()\n    \n        today = datetime.datetime.today()\n    \n        dob_year = today.year - age_input[\"age\"]\n        insured_dob = f\"{str(today.day).zfill(2)}{str(today.month).zfill(2)}{dob_year}\"\n    \n        fio = \"Петров Петр Петрович\"\n        insurer_dob = (datetime.datetime.today() - datetime.timedelta(weeks=4 * 240)).strftime(\"%d%m%Y\")\n        passport = \"1234123124\"\n        issue_date = (datetime.datetime.today() - datetime.timedelta(weeks=4)).strftime(\"%d%m%Y\")\n        address = \"Москва\"\n        phone = \"9211234567\"\n        email = \"john.doe@gmail.com\"\n    \n        insured_passport = \"1234123124\" if age_input[\"age\"] in [54, 55, 56] else None # Кейс когда требуется паспорт\n        insured_issue_date = (datetime.datetime.today() - datetime.timedelta(weeks=4)).strftime(\"%d%m%Y\") \\\n            if age_input[\"age\"] in [54, 55, 56] else None # Кейс когда требуется паспорт\n    \n        new_polis_page_2.fill_in_form(\n            fio=fio,\n            dob=insurer_dob,\n            passport=passport,\n            issue_date=issue_date,\n            address=address,\n            phone=phone,\n            email=email,\n            insured_name=\"Сидоров Егор Палыч\",\n            insured_dob=insured_dob,\n            insured_passport=insured_passport,\n            insured_issue_date=insured_issue_date\n        )\n        new_polis_page_2.click_proceed_to_payment_button()\n    \n        if not age_input[\"allowed\"]:\n            errors = new_polis_page_2.get_errors(exp_count=1)\n            assert \"\"\"Возраст застрахованного должен быть не менее 3 и не более 55 лет\"\"\" in errors\n        else:\n            errors = new_polis_page_2.get_errors(exp_count=0)\n            assert errors == []\n>           expect(page.get_by_text(\"К сожалению, оформление полиса онлайн невозможно.\")).to_be_visible(timeout=10000)\nE           AssertionError: Locator expected to be visible\nE           Actual value: None \nE           Call log:\nE           LocatorAssertions.to_be_visible with timeout 10000ms\nE           waiting for get_by_text(\"К сожалению, оформление полиса онлайн невозможно.\")\n\naddress    = 'Москва'\nage_input  = {'age': 55, 'allowed': True}\ndob_year   = 1969\nemail      = 'john.doe@gmail.com'\nerrors     = []\nfio        = 'Петров Петр Петрович'\ninsured_dob = '30011969'\ninsured_issue_date = '02012024'\ninsured_passport = '1234123124'\ninsurer_dob = '06092005'\nissue_date = '02012024'\nnew_polis_page_1 = <Pages.new_polis_step_1.NewPolisStep1 object at 0x0000021261C76CD0>\nnew_polis_page_2 = <Pages.new_polis_step_2.NewPolisStep2 object at 0x0000021261C74050>\npage       = <Page url='https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/'>\npassport   = '1234123124'\nphone      = '9211234567'\ntoday      = datetime.datetime(2024, 1, 30, 20, 56, 59, 711944)\n\ntest_polis_creation.py:266: AssertionError"}, "description": "Тест на то что застрахованным может быть только человек в возрасте от 3 до 55", "steps": [{"name": "Выбрать чекбокс: отсутствуют лица с COVID-2019", "status": "passed", "start": 1706637418506, "stop": 1706637419184}, {"name": "Выбрать чекбокс: Согласине на обработку персональных данных", "status": "passed", "start": 1706637419184, "stop": 1706637419432}, {"name": "Нажать на кнопку: Продолжить", "status": "passed", "start": 1706637419433, "stop": 1706637419634}, {"name": "Проверка статуса текущего шага: Not current", "status": "passed", "start": 1706637419634, "stop": 1706637419712}, {"name": "Заполнить данные страхователя: ", "status": "passed", "steps": [{"name": "Вводим ФИО: Петров Петр Петрович", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "b2e400cd-4c03-46bb-9862-749a08b9f223-attachment.attach"}], "start": 1706637419712, "stop": 1706637420024}, {"name": "Вводим дату рождения: 06092005", "status": "passed", "start": 1706637420024, "stop": 1706637420427}, {"name": "Вводим паспорт: 1234123124", "status": "passed", "start": 1706637420427, "stop": 1706637420569}, {"name": "Вводим дату выпуска: 02012024", "status": "passed", "start": 1706637420569, "stop": 1706637420954}, {"name": "Вводим адрес: Москва", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "10da3f5b-339c-4612-a2f2-0e6b94ca0e55-attachment.attach"}], "start": 1706637420954, "stop": 1706637421022}, {"name": "Вводим телефон: 9211234567", "status": "passed", "start": 1706637421022, "stop": 1706637423415}, {"name": "Вводим почту: john.doe@gmail.com", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "e0eea9cc-09eb-43ac-b2d4-0c6a7ee2382e-attachment.attach"}], "start": 1706637423415, "stop": 1706637423586}, {"name": "Вводим имя застрахованного: Сидоров Егор Палыч", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "bdd1587a-dd61-4fee-9db6-27f3299219d5-attachment.attach"}], "start": 1706637423744, "stop": 1706637423899}, {"name": "Вводим дату рождения застрахованного: 30011969", "status": "passed", "start": 1706637423899, "stop": 1706637424182}, {"name": "Вводим паспорт застрахованного: 1234123124", "status": "passed", "start": 1706637424182, "stop": 1706637424282}, {"name": "Вводим дату выпуска паспорта застрахованного: 02012024", "status": "passed", "start": 1706637424282, "stop": 1706637424555}], "start": 1706637419712, "stop": 1706637424555}, {"name": "Нажать на кнопку 'Перейти к оплате'", "status": "passed", "start": 1706637424555, "stop": 1706637424700}], "attachments": [{"name": "https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/", "source": "06454014-8456-4bf8-9618-bd2c71965a2e-attachment.png", "type": "image/png"}], "parameters": [{"name": "browser_name", "value": "'chromium'"}, {"name": "age_input", "value": "{'age': 55, 'allowed': True}"}], "start": 1706637418506, "stop": 1706637434799, "uuid": "7eae426a-0bee-4065-9b62-1a850ff1be1d", "historyId": "68d15521aafbb3c9be3c0e8cc26371af", "testCaseId": "c0c31910b947b43b0cceb263da553181", "fullName": "test_polis_creation#test_allowed_age_of_insured_from_3_to_55", "labels": [{"name": "suite", "value": "test_polis_creation"}, {"name": "host", "value": "LAPTOP-7TQOO23M"}, {"name": "thread", "value": "20464-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_polis_creation"}]}