{"name": "test_allowed_age_of_insured_from_3_to_55[chromium-{'age': 3, 'allowed': True}]", "status": "failed", "statusDetails": {"message": "AssertionError: Locator expected to be visible\nActual value: None \nCall log:\nLocatorAssertions.to_be_visible with timeout 10000ms\nwaiting for get_by_text(\"К сожалению, оформление полиса онлайн невозможно.\")", "trace": "page = <Page url='https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/'>\nage_input = {'age': 3, 'allowed': True}\n\n    @pytest.mark.parametrize(\"age_input\", [\n        {\"age\": 2,\n         \"allowed\": False},\n        {\"age\": 3,\n         \"allowed\": True},\n        {\"age\": 4,\n         \"allowed\": True},\n        {\"age\": 54,\n         \"allowed\": True},\n        {\"age\": 55,\n         \"allowed\": True},\n        {\"age\": 56,\n         \"allowed\": False},\n    ],\n                             ids=format_dictionary_test_id\n                             )\n    def test_allowed_age_of_insured_from_3_to_55(page, age_input):\n    \n        \"\"\"Тест на то что застрахованным может быть только человек в возрасте от 3 до 55\"\"\"\n        new_polis_page_1 = NewPolisStep1(page)\n        new_polis_page_2 = NewPolisStep2(page)\n    \n        new_polis_page_1.check_no_virus_contact()\n        new_polis_page_1.check_agreement()\n        new_polis_page_1.click_continue()\n        new_polis_page_1.check_step_is_not_active()\n    \n        today = datetime.datetime.today()\n    \n        dob_year = today.year - age_input[\"age\"]\n        insured_dob = f\"{str(today.day).zfill(2)}{str(today.month).zfill(2)}{dob_year}\"\n    \n        fio = \"Петров Петр Петрович\"\n        insurer_dob = (datetime.datetime.today() - datetime.timedelta(weeks=4 * 240)).strftime(\"%d%m%Y\")\n        passport = \"1234123124\"\n        issue_date = (datetime.datetime.today() - datetime.timedelta(weeks=4)).strftime(\"%d%m%Y\")\n        address = \"Москва\"\n        phone = \"9211234567\"\n        email = \"john.doe@gmail.com\"\n    \n        insured_passport = \"1234123124\" if age_input[\"age\"] in [54, 55, 56] else None # Кейс когда требуется паспорт\n        insured_issue_date = (datetime.datetime.today() - datetime.timedelta(weeks=4)).strftime(\"%d%m%Y\") \\\n            if age_input[\"age\"] in [54, 55, 56] else None # Кейс когда требуется паспорт\n    \n        new_polis_page_2.fill_in_form(\n            fio=fio,\n            dob=insurer_dob,\n            passport=passport,\n            issue_date=issue_date,\n            address=address,\n            phone=phone,\n            email=email,\n            insured_name=\"Сидоров Егор Палыч\",\n            insured_dob=insured_dob,\n            insured_passport=insured_passport,\n            insured_issue_date=insured_issue_date\n        )\n        new_polis_page_2.click_proceed_to_payment_button()\n    \n        if not age_input[\"allowed\"]:\n            errors = new_polis_page_2.get_errors(exp_count=1)\n            assert \"\"\"Возраст застрахованного должен быть не менее 3 и не более 55 лет\"\"\" in errors\n        else:\n            errors = new_polis_page_2.get_errors(exp_count=0)\n            assert errors == []\n>           expect(page.get_by_text(\"К сожалению, оформление полиса онлайн невозможно.\")).to_be_visible(timeout=10000)\nE           AssertionError: Locator expected to be visible\nE           Actual value: None \nE           Call log:\nE           LocatorAssertions.to_be_visible with timeout 10000ms\nE           waiting for get_by_text(\"К сожалению, оформление полиса онлайн невозможно.\")\n\naddress    = 'Москва'\nage_input  = {'age': 3, 'allowed': True}\ndob_year   = 2021\nemail      = 'john.doe@gmail.com'\nerrors     = []\nfio        = 'Петров Петр Петрович'\ninsured_dob = '30012021'\ninsured_issue_date = None\ninsured_passport = None\ninsurer_dob = '06092005'\nissue_date = '02012024'\nnew_polis_page_1 = <Pages.new_polis_step_1.NewPolisStep1 object at 0x0000021261C58CD0>\nnew_polis_page_2 = <Pages.new_polis_step_2.NewPolisStep2 object at 0x0000021261C58D10>\npage       = <Page url='https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/'>\npassport   = '1234123124'\nphone      = '9211234567'\ntoday      = datetime.datetime(2024, 1, 30, 20, 55, 0, 883411)\n\ntest_polis_creation.py:266: AssertionError"}, "description": "Тест на то что застрахованным может быть только человек в возрасте от 3 до 55", "steps": [{"name": "Выбрать чекбокс: отсутствуют лица с COVID-2019", "status": "passed", "start": 1706637299870, "stop": 1706637300442}, {"name": "Выбрать чекбокс: Согласине на обработку персональных данных", "status": "passed", "start": 1706637300442, "stop": 1706637300755}, {"name": "Нажать на кнопку: Продолжить", "status": "passed", "start": 1706637300755, "stop": 1706637300854}, {"name": "Проверка статуса текущего шага: Not current", "status": "passed", "start": 1706637300855, "stop": 1706637300883}, {"name": "Заполнить данные страхователя: ", "status": "passed", "steps": [{"name": "Вводим ФИО: Петров Петр Петрович", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "a7d89dc1-d9c3-43b9-9893-497d6058e982-attachment.attach"}], "start": 1706637300883, "stop": 1706637301087}, {"name": "Вводим дату рождения: 06092005", "status": "passed", "start": 1706637301087, "stop": 1706637301357}, {"name": "Вводим паспорт: 1234123124", "status": "passed", "start": 1706637301357, "stop": 1706637301457}, {"name": "Вводим дату выпуска: 02012024", "status": "passed", "start": 1706637301457, "stop": 1706637301696}, {"name": "Вводим адрес: Москва", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "d30ab8f0-eb87-470f-ae15-7041fb3b55ae-attachment.attach"}], "start": 1706637301696, "stop": 1706637301742}, {"name": "Вводим телефон: 9211234567", "status": "passed", "start": 1706637301742, "stop": 1706637304102}, {"name": "Вводим почту: john.doe@gmail.com", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "f7652040-9956-4512-af69-2b8fe73010c1-attachment.attach"}], "start": 1706637304102, "stop": 1706637304265}, {"name": "Вводим имя застрахованного: Сидоров Егор Палыч", "status": "passed", "start": 1706637304430, "stop": 1706637304526}, {"name": "Вводим дату рождения застрахованного: 30012021", "status": "passed", "start": 1706637304526, "stop": 1706637304857}, {"name": "Вводим паспорт застрахованного: None", "status": "passed", "start": 1706637304857, "stop": 1706637304857}, {"name": "Вводим дату выпуска паспорта застрахованного: None", "status": "passed", "start": 1706637304857, "stop": 1706637304857}], "start": 1706637300883, "stop": 1706637304857}, {"name": "Нажать на кнопку 'Перейти к оплате'", "status": "passed", "start": 1706637304857, "stop": 1706637304977}], "attachments": [{"name": "https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/", "source": "4d8f043b-d811-4118-aa39-934db1eb0cbd-attachment.png", "type": "image/png"}], "parameters": [{"name": "browser_name", "value": "'chromium'"}, {"name": "age_input", "value": "{'age': 3, 'allowed': True}"}], "start": 1706637299870, "stop": 1706637315063, "uuid": "26bdc1d6-da23-4ec9-9b10-13f839e004bb", "historyId": "e01b0785dc2ed93ff6f7cff0b7956db2", "testCaseId": "c0c31910b947b43b0cceb263da553181", "fullName": "test_polis_creation#test_allowed_age_of_insured_from_3_to_55", "labels": [{"name": "suite", "value": "test_polis_creation"}, {"name": "host", "value": "LAPTOP-7TQOO23M"}, {"name": "thread", "value": "20464-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_polis_creation"}]}