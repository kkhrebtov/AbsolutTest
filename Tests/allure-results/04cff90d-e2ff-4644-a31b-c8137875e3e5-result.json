{"name": "test_correct_error_shown_when_mandatory_field_missing[chromium-missing_field0]", "status": "failed", "statusDetails": {"message": "AssertionError: Locator expected to have count '1'\nActual value: 2 \nCall log:\nLocatorAssertions.to_have_count with timeout 5000ms\nwaiting for locator(\".error\")\n  locator resolved to 0 elements\n  unexpected value \"0\"\n  locator resolved to 0 elements\n  unexpected value \"0\"\n  locator resolved to 0 elements\n  unexpected value \"0\"\n  locator resolved to 0 elements\n  unexpected value \"0\"\n  locator resolved to 2 elements\n  unexpected value \"2\"\n  locator resolved to 2 elements\n  unexpected value \"2\"\n  locator resolved to 2 elements\n  unexpected value \"2\"\n  locator resolved to 2 elements\n  unexpected value \"2\"\n  locator resolved to 2 elements\n  unexpected value \"2\"", "trace": "page = <Page url='https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/'>\nmissing_field = {'exp_error_message': 'Не указана фамилия.', 'field_name': 'fio'}\n\n    @pytest.mark.parametrize(\"missing_field\", [\n        {\"field_name\": \"fio\",\n         \"exp_error_message\": \"Не указана фамилия.\"},\n        {\"field_name\": \"dob\",\n         \"exp_error_message\": \"Не указана дата рождения.\"},\n        {\"field_name\": \"passport\",\n         \"exp_error_message\": \"Не указаны серия/номер паспорта.\"},\n        {\"field_name\": \"issue_date\",\n         \"exp_error_message\": \"Не указаны дата выдачи паспорта.\"},\n        {\"field_name\": \"address\",\n         \"exp_error_message\": \"Не указан адрес регистрации.\"},\n        {\"field_name\": \"phone\",\n         \"exp_error_message\": \"Не указан номер телефона.\"},\n        {\"field_name\": \"email\",\n         \"exp_error_message\": \"Не указан E-Mail.\"}\n    ] #,ids=format_dictionary_test_id\n    )\n    def test_correct_error_shown_when_mandatory_field_missing(page, missing_field):\n        new_polis_page_1 = NewPolisStep1(page)\n        new_polis_page_2 = NewPolisStep2(page)\n    \n        new_polis_page_1.check_no_virus_contact()\n        new_polis_page_1.check_agreement()\n        new_polis_page_1.click_continue()\n        new_polis_page_1.check_step_is_not_active()\n    \n        fio = None if missing_field[\"field_name\"] == \"fio\" else \"Петров Петр\"\n        dob = None if missing_field[\"field_name\"] == \"dob\" else (\n            (datetime.datetime.today() - datetime.timedelta(weeks=4 * 240)).strftime(\"%d%m%Y\"))\n        passport = None if missing_field[\"field_name\"] == \"passport\" else \"1234123124\"\n        issue_date = None if missing_field[\"field_name\"] == \"issue_date\" else (\n            (datetime.datetime.today() - datetime.timedelta(weeks=4)).strftime(\"%d%m%Y\"))\n        address = None if missing_field[\"field_name\"] == \"address\" else \"Москва\"\n        phone = None if missing_field[\"field_name\"] == \"phone\" else \"9211234567\"\n        email = None if missing_field[\"field_name\"] == \"email\" else \"john.doe@gmail.com\"\n    \n        new_polis_page_2.fill_in_form(\n            fio=fio,\n            dob=dob,\n            passport=passport,\n            issue_date=issue_date,\n            address=address,\n            phone=phone,\n            email=email\n        )\n        new_polis_page_2.click_proceed_to_payment_button()\n    \n>       errors = new_polis_page_2.get_errors(exp_count=1)\n\naddress    = 'Москва'\ndob        = '06092005'\nemail      = 'john.doe@gmail.com'\nfio        = None\nissue_date = '02012024'\nmissing_field = {'exp_error_message': 'Не указана фамилия.', 'field_name': 'fio'}\nnew_polis_page_1 = <Pages.new_polis_step_1.NewPolisStep1 object at 0x0000021261B9B310>\nnew_polis_page_2 = <Pages.new_polis_step_2.NewPolisStep2 object at 0x0000021261B9BF90>\npage       = <Page url='https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/'>\npassport   = '1234123124'\nphone      = '9211234567'\n\ntest_polis_creation.py:137: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Pages.new_polis_step_2.NewPolisStep2 object at 0x0000021261B9BF90>\nexp_count = 1\n\n    def get_errors(self, exp_count: int = 0) -> List[str]:\n        self.page.wait_for_load_state()\n>       expect(self.page.locator(\".error\")).to_have_count(exp_count)\nE       AssertionError: Locator expected to have count '1'\nE       Actual value: 2 \nE       Call log:\nE       LocatorAssertions.to_have_count with timeout 5000ms\nE       waiting for locator(\".error\")\nE         locator resolved to 0 elements\nE         unexpected value \"0\"\nE         locator resolved to 0 elements\nE         unexpected value \"0\"\nE         locator resolved to 0 elements\nE         unexpected value \"0\"\nE         locator resolved to 0 elements\nE         unexpected value \"0\"\nE         locator resolved to 2 elements\nE         unexpected value \"2\"\nE         locator resolved to 2 elements\nE         unexpected value \"2\"\nE         locator resolved to 2 elements\nE         unexpected value \"2\"\nE         locator resolved to 2 elements\nE         unexpected value \"2\"\nE         locator resolved to 2 elements\nE         unexpected value \"2\"\n\nexp_count  = 1\nself       = <Pages.new_polis_step_2.NewPolisStep2 object at 0x0000021261B9BF90>\n\n..\\Pages\\new_polis_step_2.py:82: AssertionError"}, "steps": [{"name": "Выбрать чекбокс: отсутствуют лица с COVID-2019", "status": "passed", "start": 1706637230954, "stop": 1706637231782}, {"name": "Выбрать чекбокс: Согласине на обработку персональных данных", "status": "passed", "start": 1706637231783, "stop": 1706637232076}, {"name": "Нажать на кнопку: Продолжить", "status": "passed", "start": 1706637232076, "stop": 1706637232313}, {"name": "Проверка статуса текущего шага: Not current", "status": "passed", "start": 1706637232313, "stop": 1706637232385}, {"name": "Заполнить данные страхователя: ", "status": "passed", "steps": [{"name": "Вводим ФИО: None", "status": "passed", "start": 1706637232386, "stop": 1706637232386}, {"name": "Вводим дату рождения: 06092005", "status": "passed", "start": 1706637232386, "stop": 1706637232832}, {"name": "Вводим паспорт: 1234123124", "status": "passed", "start": 1706637232832, "stop": 1706637232943}, {"name": "Вводим дату выпуска: 02012024", "status": "passed", "start": 1706637232943, "stop": 1706637233291}, {"name": "Вводим адрес: Москва", "status": "passed", "start": 1706637233292, "stop": 1706637233360}, {"name": "Вводим телефон: 9211234567", "status": "passed", "start": 1706637233360, "stop": 1706637235844}, {"name": "Вводим почту: john.doe@gmail.com", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "0764c3cb-0cb4-48b4-b481-a90c00f73265-attachment.attach"}], "start": 1706637235844, "stop": 1706637235989}], "start": 1706637232386, "stop": 1706637235989}, {"name": "Нажать на кнопку 'Перейти к оплате'", "status": "passed", "start": 1706637235989, "stop": 1706637236215}], "attachments": [{"name": "https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/", "source": "0b68a0a6-aab0-49fa-94c5-695e295338d6-attachment.png", "type": "image/png"}], "parameters": [{"name": "browser_name", "value": "'chromium'"}, {"name": "missing_field", "value": "{'field_name': 'fio', 'exp_error_message': 'Не указана фамилия.'}"}], "start": 1706637230953, "stop": 1706637241287, "uuid": "f2d0a7b3-8511-46f9-9ed4-cd688e19bf23", "historyId": "5f9e32cb4fe83834fb1fb1bb119ca923", "testCaseId": "230b9e668d1feb0d354b5afd42dcfc26", "fullName": "test_polis_creation#test_correct_error_shown_when_mandatory_field_missing", "labels": [{"name": "suite", "value": "test_polis_creation"}, {"name": "host", "value": "LAPTOP-7TQOO23M"}, {"name": "thread", "value": "20464-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_polis_creation"}]}