{"name": "test_allowed_age_of_insured_from_3_to_55[chromium-{'age': 4, 'allowed': True}]", "status": "failed", "statusDetails": {"message": "AssertionError: Locator expected to be visible\nActual value: None \nCall log:\nLocatorAssertions.to_be_visible with timeout 10000ms\nwaiting for get_by_text(\"К сожалению, оформление полиса онлайн невозможно.\")", "trace": "page = <Page url='https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/'>\nage_input = {'age': 4, 'allowed': True}\n\n    @pytest.mark.parametrize(\"age_input\", [\n        {\"age\": 2,\n         \"allowed\": False},\n        {\"age\": 3,\n         \"allowed\": True},\n        {\"age\": 4,\n         \"allowed\": True},\n        {\"age\": 54,\n         \"allowed\": True},\n        {\"age\": 55,\n         \"allowed\": True},\n        {\"age\": 56,\n         \"allowed\": False},\n    ],\n                             ids=format_dictionary_test_id\n                             )\n    def test_allowed_age_of_insured_from_3_to_55(page, age_input):\n    \n        \"\"\"Тест на то что застрахованным может быть только человек в возрасте от 3 до 55\"\"\"\n        new_polis_page_1 = NewPolisStep1(page)\n        new_polis_page_2 = NewPolisStep2(page)\n    \n        new_polis_page_1.check_no_virus_contact()\n        new_polis_page_1.check_agreement()\n        new_polis_page_1.click_continue()\n        new_polis_page_1.check_step_is_not_active()\n    \n        today = datetime.datetime.today()\n    \n        dob_year = today.year - age_input[\"age\"]\n        insured_dob = f\"{str(today.day).zfill(2)}{str(today.month).zfill(2)}{dob_year}\"\n    \n        fio = \"Петров Петр Петрович\"\n        insurer_dob = (datetime.datetime.today() - datetime.timedelta(weeks=4 * 240)).strftime(\"%d%m%Y\")\n        passport = \"1234123124\"\n        issue_date = (datetime.datetime.today() - datetime.timedelta(weeks=4)).strftime(\"%d%m%Y\")\n        address = \"Москва\"\n        phone = \"9211234567\"\n        email = \"john.doe@gmail.com\"\n    \n        insured_passport = \"1234123124\" if age_input[\"age\"] in [54, 55, 56] else None # Кейс когда требуется паспорт\n        insured_issue_date = (datetime.datetime.today() - datetime.timedelta(weeks=4)).strftime(\"%d%m%Y\") \\\n            if age_input[\"age\"] in [54, 55, 56] else None # Кейс когда требуется паспорт\n    \n        new_polis_page_2.fill_in_form(\n            fio=fio,\n            dob=insurer_dob,\n            passport=passport,\n            issue_date=issue_date,\n            address=address,\n            phone=phone,\n            email=email,\n            insured_name=\"Сидоров Егор Палыч\",\n            insured_dob=insured_dob,\n            insured_passport=insured_passport,\n            insured_issue_date=insured_issue_date\n        )\n        new_polis_page_2.click_proceed_to_payment_button()\n    \n        if not age_input[\"allowed\"]:\n            errors = new_polis_page_2.get_errors(exp_count=1)\n            assert \"\"\"Возраст застрахованного должен быть не менее 3 и не более 55 лет\"\"\" in errors\n        else:\n            errors = new_polis_page_2.get_errors(exp_count=0)\n            assert errors == []\n>           expect(page.get_by_text(\"К сожалению, оформление полиса онлайн невозможно.\")).to_be_visible(timeout=10000)\nE           AssertionError: Locator expected to be visible\nE           Actual value: None \nE           Call log:\nE           LocatorAssertions.to_be_visible with timeout 10000ms\nE           waiting for get_by_text(\"К сожалению, оформление полиса онлайн невозможно.\")\n\naddress    = 'Москва'\nage_input  = {'age': 4, 'allowed': True}\ndob_year   = 2020\nemail      = 'john.doe@gmail.com'\nerrors     = []\nfio        = 'Петров Петр Петрович'\ninsured_dob = '30012020'\ninsured_issue_date = None\ninsured_passport = None\ninsurer_dob = '06092005'\nissue_date = '02012024'\nnew_polis_page_1 = <Pages.new_polis_step_1.NewPolisStep1 object at 0x0000021261D6AC90>\nnew_polis_page_2 = <Pages.new_polis_step_2.NewPolisStep2 object at 0x0000021261D6AF90>\npage       = <Page url='https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/'>\npassport   = '1234123124'\nphone      = '9211234567'\ntoday      = datetime.datetime(2024, 1, 30, 20, 55, 43, 925051)\n\ntest_polis_creation.py:266: AssertionError"}, "description": "Тест на то что застрахованным может быть только человек в возрасте от 3 до 55", "steps": [{"name": "Выбрать чекбокс: отсутствуют лица с COVID-2019", "status": "passed", "start": 1706637342614, "stop": 1706637343185}, {"name": "Выбрать чекбокс: Согласине на обработку персональных данных", "status": "passed", "start": 1706637343185, "stop": 1706637343576}, {"name": "Нажать на кнопку: Продолжить", "status": "passed", "start": 1706637343576, "stop": 1706637343828}, {"name": "Проверка статуса текущего шага: Not current", "status": "passed", "start": 1706637343828, "stop": 1706637343925}, {"name": "Заполнить данные страхователя: ", "status": "passed", "steps": [{"name": "Вводим ФИО: Петров Петр Петрович", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "56a547da-563d-4f59-ac22-255578be76c9-attachment.attach"}], "start": 1706637343925, "stop": 1706637344132}, {"name": "Вводим дату рождения: 06092005", "status": "passed", "start": 1706637344132, "stop": 1706637344433}, {"name": "Вводим паспорт: 1234123124", "status": "passed", "start": 1706637344433, "stop": 1706637344495}, {"name": "Вводим дату выпуска: 02012024", "status": "passed", "start": 1706637344495, "stop": 1706637344756}, {"name": "Вводим адрес: Москва", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "f0ed15b5-a1ef-44f6-a138-8a9f87d05746-attachment.attach"}], "start": 1706637344756, "stop": 1706637344808}, {"name": "Вводим телефон: 9211234567", "status": "passed", "start": 1706637344808, "stop": 1706637347142}, {"name": "Вводим почту: john.doe@gmail.com", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "bf891f7b-3625-459d-b56d-bcf47a6c572f-attachment.attach"}], "start": 1706637347142, "stop": 1706637347371}, {"name": "Вводим имя застрахованного: Сидоров Егор Палыч", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "a0008e60-690a-4d09-9015-f906502692e9-attachment.attach"}], "start": 1706637347557, "stop": 1706637347773}, {"name": "Вводим дату рождения застрахованного: 30012020", "status": "passed", "start": 1706637347773, "stop": 1706637348121}, {"name": "Вводим паспорт застрахованного: None", "status": "passed", "start": 1706637348122, "stop": 1706637348122}, {"name": "Вводим дату выпуска паспорта застрахованного: None", "status": "passed", "start": 1706637348122, "stop": 1706637348122}], "start": 1706637343925, "stop": 1706637348122}, {"name": "Нажать на кнопку 'Перейти к оплате'", "status": "passed", "start": 1706637348122, "stop": 1706637348266}], "attachments": [{"name": "https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/", "source": "de3d066d-51f6-45c3-8cf8-9acc768d3399-attachment.png", "type": "image/png"}], "parameters": [{"name": "browser_name", "value": "'chromium'"}, {"name": "age_input", "value": "{'age': 4, 'allowed': True}"}], "start": 1706637342614, "stop": 1706637358362, "uuid": "65126741-6508-41da-ab19-900a06c90db3", "historyId": "882b3b32c3a72770112394fc2000ba0a", "testCaseId": "c0c31910b947b43b0cceb263da553181", "fullName": "test_polis_creation#test_allowed_age_of_insured_from_3_to_55", "labels": [{"name": "suite", "value": "test_polis_creation"}, {"name": "host", "value": "LAPTOP-7TQOO23M"}, {"name": "thread", "value": "20464-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_polis_creation"}]}