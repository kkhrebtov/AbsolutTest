{"name": "test_allowed_age_of_insurer_from_18_to_55[chromium-{'age': 17, 'allowed': False}]", "status": "failed", "statusDetails": {"message": "AssertionError: Locator expected to have count '1'\nActual value: 0 \nCall log:\nLocatorAssertions.to_have_count with timeout 5000ms\nwaiting for locator(\".error\")\n  locator resolved to 0 elements\n  unexpected value \"0\"\n  locator resolved to 0 elements\n  unexpected value \"0\"\n  locator resolved to 0 elements\n  unexpected value \"0\"\n  locator resolved to 0 elements\n  unexpected value \"0\"\n  locator resolved to 0 elements\n  unexpected value \"0\"\n  locator resolved to 0 elements\n  unexpected value \"0\"\n  locator resolved to 0 elements\n  unexpected value \"0\"\n  locator resolved to 0 elements\n  unexpected value \"0\"\n  locator resolved to 0 elements\n  unexpected value \"0\"", "trace": "page = <Page url='https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/'>\nage_input = {'age': 17, 'allowed': False}\n\n    @pytest.mark.parametrize(\"age_input\", [\n        {\"age\": 17,\n         \"allowed\": False},\n        {\"age\": 18,\n         \"allowed\": True},\n        {\"age\": 19,\n         \"allowed\": True},\n        {\"age\": 54,\n         \"allowed\": True},\n        {\"age\": 55,\n         \"allowed\": True},\n        {\"age\": 56,\n         \"allowed\": False},\n    ],\n                             ids=format_dictionary_test_id\n                             )\n    def test_allowed_age_of_insurer_from_18_to_55(page, age_input):\n        \"\"\"Тест на то что страхователем может быть только человек в возрасте от 18 до 55\"\"\"\n        new_polis_page_1 = NewPolisStep1(page)\n        new_polis_page_2 = NewPolisStep2(page)\n    \n        new_polis_page_1.check_no_virus_contact()\n        new_polis_page_1.check_agreement()\n        new_polis_page_1.click_continue()\n        new_polis_page_1.check_step_is_not_active()\n    \n        today = datetime.datetime.today()\n        year = today.year\n        month = today.month\n        day = today.day\n    \n        dob_year = year - age_input[\"age\"]\n        dob = f\"{str(day).zfill(2)}{str(month).zfill(2)}{dob_year}\"\n    \n        fio = \"Петров Петр Петрович\"\n        passport = \"1234123124\"\n        issue_date = (datetime.datetime.today() - datetime.timedelta(weeks=4)).strftime(\"%d%m%Y\")\n        address = \"Москва\"\n        phone = \"9211234567\"\n        email = \"john.doe@gmail.com\"\n    \n        new_polis_page_2.fill_in_form(\n            fio=fio,\n            dob=dob,\n            passport=passport,\n            issue_date=issue_date,\n            address=address,\n            phone=phone,\n            email=email\n        )\n        new_polis_page_2.click_proceed_to_payment_button()\n    \n        if not age_input[\"allowed\"]:\n>           errors = new_polis_page_2.get_errors(exp_count=1)\n\naddress    = 'Москва'\nage_input  = {'age': 17, 'allowed': False}\nday        = 30\ndob        = '30012007'\ndob_year   = 2007\nemail      = 'john.doe@gmail.com'\nfio        = 'Петров Петр Петрович'\nissue_date = '02012024'\nmonth      = 1\nnew_polis_page_1 = <Pages.new_polis_step_1.NewPolisStep1 object at 0x0000021261C16850>\nnew_polis_page_2 = <Pages.new_polis_step_2.NewPolisStep2 object at 0x0000021261C16790>\npage       = <Page url='https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/'>\npassport   = '1234123124'\nphone      = '9211234567'\ntoday      = datetime.datetime(2024, 1, 30, 20, 54, 5, 938861)\nyear       = 2024\n\ntest_polis_creation.py:194: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Pages.new_polis_step_2.NewPolisStep2 object at 0x0000021261C16790>\nexp_count = 1\n\n    def get_errors(self, exp_count: int = 0) -> List[str]:\n        self.page.wait_for_load_state()\n>       expect(self.page.locator(\".error\")).to_have_count(exp_count)\nE       AssertionError: Locator expected to have count '1'\nE       Actual value: 0 \nE       Call log:\nE       LocatorAssertions.to_have_count with timeout 5000ms\nE       waiting for locator(\".error\")\nE         locator resolved to 0 elements\nE         unexpected value \"0\"\nE         locator resolved to 0 elements\nE         unexpected value \"0\"\nE         locator resolved to 0 elements\nE         unexpected value \"0\"\nE         locator resolved to 0 elements\nE         unexpected value \"0\"\nE         locator resolved to 0 elements\nE         unexpected value \"0\"\nE         locator resolved to 0 elements\nE         unexpected value \"0\"\nE         locator resolved to 0 elements\nE         unexpected value \"0\"\nE         locator resolved to 0 elements\nE         unexpected value \"0\"\nE         locator resolved to 0 elements\nE         unexpected value \"0\"\n\nexp_count  = 1\nself       = <Pages.new_polis_step_2.NewPolisStep2 object at 0x0000021261C16790>\n\n..\\Pages\\new_polis_step_2.py:82: AssertionError"}, "description": "Тест на то что страхователем может быть только человек в возрасте от 18 до 55", "steps": [{"name": "Выбрать чекбокс: отсутствуют лица с COVID-2019", "status": "passed", "start": 1706637244157, "stop": 1706637245011}, {"name": "Выбрать чекбокс: Согласине на обработку персональных данных", "status": "passed", "start": 1706637245011, "stop": 1706637245414}, {"name": "Нажать на кнопку: Продолжить", "status": "passed", "start": 1706637245414, "stop": 1706637245827}, {"name": "Проверка статуса текущего шага: Not current", "status": "passed", "start": 1706637245827, "stop": 1706637245938}, {"name": "Заполнить данные страхователя: ", "status": "passed", "steps": [{"name": "Вводим ФИО: Петров Петр Петрович", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "0f90a5ee-ed90-4db6-bbc9-23eb6ae0729e-attachment.attach"}], "start": 1706637245939, "stop": 1706637246221}, {"name": "Вводим дату рождения: 30012007", "status": "passed", "start": 1706637246221, "stop": 1706637246700}, {"name": "Вводим паспорт: 1234123124", "status": "passed", "start": 1706637246700, "stop": 1706637246797}, {"name": "Вводим дату выпуска: 02012024", "status": "passed", "start": 1706637246797, "stop": 1706637247266}, {"name": "Вводим адрес: Москва", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "f64003e3-1f6b-4002-84a9-81736237652d-attachment.attach"}], "start": 1706637247266, "stop": 1706637247341}, {"name": "Вводим телефон: 9211234567", "status": "passed", "start": 1706637247341, "stop": 1706637249756}, {"name": "Вводим почту: john.doe@gmail.com", "status": "passed", "attachments": [{"name": " !!!!!Request Failure!!!!", "source": "5f773ba9-7daf-4ed0-a775-cc121e29ab8d-attachment.attach"}], "start": 1706637249756, "stop": 1706637249920}], "start": 1706637245939, "stop": 1706637249920}, {"name": "Нажать на кнопку 'Перейти к оплате'", "status": "passed", "start": 1706637249920, "stop": 1706637250118}], "attachments": [{"name": "https://old.absolutins.ru/kupit-strahovoj-polis/strahovanie-zhizni-i-zdorovya/zashchita-ot-virusa/", "source": "559d90aa-b8fb-4660-b236-24b37cdd7ad3-attachment.png", "type": "image/png"}], "parameters": [{"name": "browser_name", "value": "'chromium'"}, {"name": "age_input", "value": "{'age': 17, 'allowed': False}"}], "start": 1706637244156, "stop": 1706637255184, "uuid": "7c52c480-248b-44b9-b78f-def77a502ab3", "historyId": "5752d47d8b9d9f3304d6a97ab6f183f6", "testCaseId": "4fe8a91986b87b01ce452534cdb89eb4", "fullName": "test_polis_creation#test_allowed_age_of_insurer_from_18_to_55", "labels": [{"name": "suite", "value": "test_polis_creation"}, {"name": "host", "value": "LAPTOP-7TQOO23M"}, {"name": "thread", "value": "20464-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_polis_creation"}]}